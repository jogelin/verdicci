library contact_controller;

import 'package:angular/angular.dart';
import 'package:mailer/mailer.dart';

@Controller(
    selector: '[contact-ctrl]',
    publishAs: 'contactCtrl')
class ContactController {

  SmtpOptions _smtpOptions;
  SmtpTransport _smtpTransport;

  String _from;
  String _to;

  ContactController(this._smtpOptions, this._smtpTransport) {
    _smtpOptions.hostName = "";
    _smtpOptions.username = "";
    _smtpOptions.password = "";
  }

  void sendMail() {
    // Create our mail/envelope.
    Envelope envelope = new Envelope()
      ..from = _from
      ..recipients.add(_to)
      ..subject = 'Contact from VERDICCI'
      ..html = '<h1>Test</h1><p>Hey!</p>';

    // Email it.
    _smtpTransport.send(envelope)
    .then((success) => print('Email sent! $success'))
    .catchError((e) => print('Error occured: $e'));
  }
}
